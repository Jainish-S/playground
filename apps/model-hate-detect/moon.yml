$schema: 'https://moonrepo.dev/schemas/project.json'

language: 'python'
type: 'application'

tasks:
  dev:
    command: 'uv'
    args: ['run', 'uvicorn', 'model.main:app', '--reload', '--host', '0.0.0.0', '--port', '8003']
    local: true

  test:
    command: 'uv'
    args: ['run', 'pytest', 'tests/', '-v']
    inputs: ['src/**/*.py', 'tests/**/*.py']

  docker:
    command: 'docker'
    args: ['build', '-f', 'Dockerfile', '-t', 'model-hate-detect:latest', '../../']
    inputs: ['src/**', 'Dockerfile']
